using System;
using System.IO;

namespace Palindrom
{
    class Program
    {
        //Метод возвращает true если подстрока палиндром, иначе возвращает false
        static bool IsPalindrom(string s, int left, int right)
        {
            while (left <= right)
            {
                if (s[left] != s[right])
                {
                    return false;
                }
                ++left;
                --right;
            }
            return true;
        }
        static void Main()
        {
            StreamReader fileIn = new StreamReader("d:/Dop_pr/input.txt");
            string palindrom = "";
            while (!fileIn.EndOfStream)
            {
                string data = fileIn.ReadLine();
                palindrom += data;
            }
            List<string> words = new List<string>();
            Console.WriteLine("Палиндромы: ");
            //генерируем все возможные подстроки
            DateTime startTime = DateTime.Now;
            for (int left = 0; left < palindrom.Length; ++left)
            {
                for (int right = left + 1; right < palindrom.Length; ++right)
                {
                    if (IsPalindrom(palindrom, left, right))
                    {
                        words.Add(palindrom.Substring(left, right - left + 1));
                    }
                }
            }
            DateTime endTime = DateTime.Now;
            TimeSpan resalt = endTime - startTime;
            foreach (string word in words)
            {
                Console.WriteLine(word);
            }
            Console.WriteLine($"Прямой поиск палиндромов занял {resalt.TotalMilliseconds} миллисекунд");
        }
    }
}
